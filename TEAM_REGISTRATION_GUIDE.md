# üéÆ –°–∏—Å—Ç–µ–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∫–æ–º–∞–Ω–¥ - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –û—à–∏–±–∫–∞ `'Tournament' object has no attribute 'tournament_format'`
**–ü—Ä–æ–±–ª–µ–º–∞:** –í –º–æ–¥–µ–ª–∏ `Tournament` –∞—Ç—Ä–∏–±—É—Ç –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è `format`, –∞ –≤ –∫–æ–¥–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–æ—Å—å `tournament_format`

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- –û–±–Ω–æ–≤–ª–µ–Ω —Ñ–∞–π–ª `handlers/user/tournaments.py`
- –î–æ–±–∞–≤–ª–µ–Ω–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è —Ñ–æ—Ä–º–∞—Ç–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∞—Ç—Ä–∏–±—É—Ç `tournament.format`

### 2. –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –º–µ—Ç–æ–¥—ã –≤ `TeamRepository`
**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–µ—Ç–æ–¥—ã `is_captain_registered` –∏ `get_by_name_and_tournament` –Ω–µ –±—ã–ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `is_captain_registered(captain_id, tournament_id)` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∫–∞–ø–∏—Ç–∞–Ω–∞ –Ω–∞ —Ç—É—Ä–Ω–∏—Ä
- –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `get_by_name_and_tournament(tournament_id, name)` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏ —Ç—É—Ä–Ω–∏—Ä—É

## üìã –ü—Ä–æ—Ü–µ—Å—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∫–æ–º–∞–Ω–¥—ã

### –®–∞–≥ 1: –í—ã–±–æ—Ä —Ç—É—Ä–Ω–∏—Ä–∞
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç—É—Ä–Ω–∏—Ä–æ–≤
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç—å (–∫–æ–ª-–≤–æ –∫–æ–º–∞–Ω–¥ / –º–∞–∫—Å–∏–º—É–º)
- –ï—Å–ª–∏ —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω - –∫–Ω–æ–ø–∫–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤
- **–ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–í–ï–†–ö–ê** –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∫–∞–Ω–∞–ª—ã
- –ï—Å–ª–∏ –Ω–µ –ø–æ–¥–ø–∏—Å–∞–Ω - –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å –∫–Ω–æ–ø–∫–∞–º–∏ –ø–æ–¥–ø–∏—Å–∫–∏
- –ö–Ω–æ–ø–∫–∞ "‚úÖ –Ø –ø–æ–¥–ø–∏—Å–∞–ª—Å—è, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–Ω–æ–≤–∞"
- –ü–æ—Å–ª–µ –ø–æ–¥–ø–∏—Å–∫–∏ - –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

### –®–∞–≥ 3: –í–≤–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã
- –ú–∏–Ω–∏–º—É–º 3 —Å–∏–º–≤–æ–ª–∞
- –ú–∞–∫—Å–∏–º—É–º 50 —Å–∏–º–≤–æ–ª–æ–≤
- –£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –≤ —Ä–∞–º–∫–∞—Ö —Ç—É—Ä–Ω–∏—Ä–∞

### –®–∞–≥ 4: –ó–∞–≥—Ä—É–∑–∫–∞ –ª–æ–≥–æ—Ç–∏–ø–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- –§–æ—Ä–º–∞—Ç—ã: JPG, PNG
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 5 –ú–ë
- –ú–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å

### –®–∞–≥ 5: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤
- –§–æ—Ä–º–∞—Ç: `–ù–∏–∫–Ω–µ–π–º | Game ID`
- –ü—Ä–∏–º–µ—Ä: `ProPlayer | 123456789`
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∏–≥—Ä–æ–π

### –®–∞–≥ 6: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∞—Å–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- –¢–æ—Ç –∂–µ —Ñ–æ—Ä–º–∞—Ç
- –ú–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å

### –®–∞–≥ 7: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
- –ö–Ω–æ–ø–∫–∞ "‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å"
- –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ú–æ–¥–µ–ª—å Tournament
```python
# –ê—Ç—Ä–∏–±—É—Ç—ã
tournament.id               # ID —Ç—É—Ä–Ω–∏—Ä–∞
tournament.name             # –ù–∞–∑–≤–∞–Ω–∏–µ
tournament.format           # ‚ùó –ù–ï tournament_format! –§–æ—Ä–º–∞—Ç —Ç—É—Ä–Ω–∏—Ä–∞
tournament.game             # –°–≤—è–∑—å —Å –∏–≥—Ä–æ–π
tournament.max_teams        # –ú–∞–∫—Å–∏–º—É–º –∫–æ–º–∞–Ω–¥
tournament.status           # –°—Ç–∞—Ç—É—Å (registration, in_progress, completed)
tournament.required_channels_list  # –°–ø–∏—Å–æ–∫ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤
```

### –ù–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã TeamRepository
```python
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∫–∞–ø–∏—Ç–∞–Ω–∞
is_registered = await TeamRepository.is_captain_registered(captain_id, tournament_id)

# –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
team = await TeamRepository.get_by_name_and_tournament(tournament_id, team_name)

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–¥–æ–±—Ä–µ–Ω–Ω—ã—Ö –∫–æ–º–∞–Ω–¥
count = await TeamRepository.get_approved_teams_count(tournament_id)
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –∫–∞–Ω–∞–ª—ã
```python
from utils.channel_checker import check_all_channels_subscription

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –∫–∞–Ω–∞–ª–æ–≤
is_subscribed, unsubscribed = await check_all_channels_subscription(
    bot, user_id, required_channels
)

# is_subscribed - True/False
# unsubscribed - —Å–ø–∏—Å–æ–∫ –∫–∞–Ω–∞–ª–æ–≤, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –ø–æ–¥–ø–∏—Å–∞–Ω
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
```bash
# –¢–µ—Å—Ç —Å–∏—Å—Ç–µ–º—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
python test_team_registration.py

# –¢–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞–Ω–∞–ª–æ–≤
python test_channel_subscription.py
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–æ–≤
```
‚úÖ –ê–∫—Ç–∏–≤–Ω—ã—Ö —Ç—É—Ä–Ω–∏—Ä–æ–≤: 1
‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–π–¥–µ–Ω
‚úÖ –ö–æ–º–∞–Ω–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: 0
‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∞: –î–∞
‚úÖ –î–æ—Å—Ç—É–ø–Ω–æ –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏: 1
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ë–æ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º** –≤ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –∫–∞–Ω–∞–ª–∞—Ö –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ø–∏—Å–∫–∏
2. **–§–æ—Ä–º–∞—Ç —Ç—É—Ä–Ω–∏—Ä–∞** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `tournament.format`, –∞ –Ω–µ `tournament.tournament_format`
3. **–£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –Ω–∞–∑–≤–∞–Ω–∏—è** –∫–æ–º–∞–Ω–¥—ã –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–≥–æ —Ç—É—Ä–Ω–∏—Ä–∞
4. **–°—Ç–∞—Ç—É—Å —Ç—É—Ä–Ω–∏—Ä–∞** –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `registration` –¥–ª—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

## üöÄ –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

```bash
python main.py
```

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

- [ ] –î–æ–±–∞–≤–∏—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã –¥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
- [ ] –î–æ–±–∞–≤–∏—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã –∫–∞–ø–∏—Ç–∞–Ω–æ–º
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä —Å–æ—Å—Ç–∞–≤–∞ –∫–æ–º–∞–Ω–¥—ã
- [ ] –î–æ–±–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å—Ç–∞—Ç—É—Å–µ –º–æ–¥–µ—Ä–∞—Ü–∏–∏
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–º–µ–Ω—ã –∏–≥—Ä–æ–∫–æ–≤
