# Скрытие админских команд от обычных пользователей

## Описание

Реализована система условной видимости команд бота, которая скрывает команду `/admin` от обычных пользователей и показывает её только администраторам.

## Реализованные изменения

### 1. Файл `utils/admin_commands.py` (новый)
- Утилитарные функции для управления командами
- Константы `USER_COMMANDS` и `ADMIN_COMMANDS`
- Функция `set_admin_commands()` - установка админских команд для пользователя
- Функция `remove_admin_commands()` - удаление админских команд
- Функция `update_all_admin_commands()` - обновление команд для всех админов

### 2. Файл `main.py`
- Добавлены импорты для работы с `BotCommandScope`
- Функция `on_startup()` теперь:
  - Устанавливает базовые команды для всех пользователей (start, help, menu)
  - Устанавливает расширенный набор команд для администраторов (+admin)

### 3. Файл `handlers/admin/users.py`
- Функция `make_admin()` теперь автоматически устанавливает админские команды
- Функция `remove_admin()` теперь автоматически удаляет админские команды

## Принцип работы

1. **Для обычных пользователей**: Видны команды `/start`, `/help`, `/menu`
2. **Для администраторов**: Видны команды `/start`, `/help`, `/menu`, `/admin`

## Механизм работы

1. При запуске бота устанавливаются команды для всех пользователей (базовые)
2. Для каждого администратора из базы данных устанавливаются расширенные команды
3. При назначении пользователя администратором автоматически добавляется команда `/admin`
4. При снятии прав администратора команда `/admin` автоматически удаляется

## Технические детали

- Используется `BotCommandScopeDefault()` для обычных пользователей
- Используется `BotCommandScopeChat(chat_id=user_id)` для администраторов
- Все изменения прав администратора теперь автоматически обновляют список команд
- Система работает асинхронно и обрабатывает ошибки

## Преимущества

- ✅ Команда `/admin` скрыта от обычных пользователей
- ✅ Автоматическое обновление команд при изменении прав
- ✅ Централизованное управление списком команд
- ✅ Обработка ошибок при установке команд
- ✅ Логирование всех операций

## Тестирование

Все компоненты протестированы:
- Импорты модулей работают корректно
- Нет синтаксических ошибок
- Базовая функциональность проверена